(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{281:function(e,t,a){e.exports=a(644)},286:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},309:function(e,t,a){},310:function(e,t,a){},311:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){},337:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},642:function(e,t,a){},644:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(73),s=a.n(c),o=(a(286),a(24)),l=a(17),i=a(19),u=a(21),m=a(20),d=a(22),p=(a(287),a(65)),h=a(25),g=(a(288),a(74)),f=a.n(g),v=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.setState({filterQuery:t})},a.searchButtonClicked=function(e){a.props.filterProducts(a.state.filterQuery)},a.homeButtonClicked=function(e){a.props.filterProducts(""),a.setState({filterQuery:""})},console.log(e),a.state={filterQuery:e.filterQuery},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"nav-left-item"},r.a.createElement(h.b,{to:"/products",className:"navbar-brand",onClick:function(t){return e.homeButtonClicked(t)}},r.a.createElement("img",{src:f.a,alt:"logo",className:"logo"})),r.a.createElement("form",{className:"form-inline"},r.a.createElement("input",{className:"form-control mr-sm-2 search",type:"search",name:"search",placeholder:"Write something...","aria-label":"Search",onChange:function(t){return e.handleChange(t)},value:this.state.filterQuery}),r.a.createElement(h.b,{className:"btn btn-light",onClick:function(t){return e.searchButtonClicked(t)},to:"/products"},"Search"))),r.a.createElement("div",{className:"nav-right-item"},r.a.createElement(h.b,{to:"/profile"},r.a.createElement("p",null,"Profile")),r.a.createElement(h.b,{to:"/myproducts"},r.a.createElement("p",null,"My Products")),r.a.createElement(h.b,{to:"/user/"+this.props.loggedInUser._id+"/myrents"},r.a.createElement("p",null,"My Rents")),r.a.createElement(h.b,{to:"/messages"},r.a.createElement("p",null,"Messages"))))}}]),t}(n.Component),E=a(49),b=a(250),y=a.n(b),N=function e(){var t=this;Object(l.a)(this,e),this.signup=function(e,a,n,r,c){return t.service.post("/auth/signup",{username:e,password:a,city:n,email:r,photo:c}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/auth/login",{username:e,password:a}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/auth/userData").then(function(e){return e.data})},this.logout=function(){return t.service.get("/auth/logout").then(function(e){return e.data})},this.addProduct=function(e,a,n,r,c,s,o){return t.service.post("/addProduct",{owner:e,imageUrl:a,name:n,category:r,price:c,description:s,position:o}).then(function(e){return e.data})},this.deleteProduct=function(e){return t.service.post("/deleteProduct",{id:e}).then(function(e){return e.data})},this.getProducts=function(){return t.service.get("/products").then(function(e){return e})},this.getMyProducts=function(e){return t.service.post("/myproducts",{id:e}).then(function(e){return e.data}).catch(function(e){return e})},this.getProductDetail=function(e){return t.service.post("/productDetail",{id:e}).then(function(e){return e.data}).catch(function(e){return e})},this.getPcategory=function(e){return t.service.get("/category",{category:e}).then(function(e){return e})},this.handleUpload=function(e){return t.service.post("/upload",e).then(function(e){return e.data}).catch(function(e){return e})},this.handleUploadUser=function(e){return t.service.post("/auth/signup/upload",e).then(function(e){return e.data}).catch(function(e){return e})},this.updateProduct=function(e,a,n,r,c,s,o){return t.service.post("/updateProduct",{id:e,imageUrl:a,name:n,category:r,price:c,description:s,position:o}).then(function(e){return e})},this.updateUser=function(e,a,n,r){return t.service.post("/updateUser",{id:e,username:a,city:n,email:r}).then(function(e){return e})},this.getMyRents=function(e){return t.service.post("/myrents",{id:e}).then(function(e){return e.data}).catch(function(e){return e})},this.updateRating=function(e,a){return t.service.post("/updateRating",{id:e,rating:a}).then(function(e){return e.data}).catch(function(e){return e})},this.addRent=function(e,a,n,r,c){return t.service.post("/addRent",{product:e,owner:a,client:n,firstDay:r,lastDay:c}).then(function(e){return e.data})},this.getMyRentsPending=function(e){return t.service.post("/myRentsPending",{id:e}).then(function(e){return e.data}).catch(function(e){return e})},this.updateStatus=function(e,a){return t.service.post("/updateStatus",{id:e,status:a}).then(function(e){return e.data}).catch(function(e){return e})},this.service=y.a.create({baseURL:"https://rentovpg.herokuapp.com",withCredentials:!0})},C=(a(309),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then(function(e){a.setState({username:"",password:""}),a.props.getUser(e)}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(E.a)({},n,r))},a.state={username:"",password:""},a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-clean"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("h2",{className:"sr-only"},"Login Form"),r.a.createElement("div",{className:"illustration"},r.a.createElement("img",{className:"rounded-circle",src:f.a,width:150,alt:"logo"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",name:"username",placeholder:"Username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit",value:"Login"},"Log In")),r.a.createElement("p",{className:"forgot"},"Don't have account? ",r.a.createElement(h.b,{to:"/signup"}," Signup"))))}}]),t}(n.Component)),O=(a(310),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),a.service.handleUpload(t).then(function(e){console.log("response is: ",e),a.setState(Object(o.a)({},a.state,{photo:e.secure_url}))}).catch(function(e){console.log("Error while uploading the file: ",e)})},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password,r=a.state.city,c=a.state.email,s=a.state.photo;a.service.signup(t,n,r,c,s).then(function(){a.setState({username:"",password:"",city:"",email:"",photo:""}),a.service.login(t,n).then(function(e){a.props.getUser(e),a.props.history.push("/products")}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(E.a)({},n,r))},a.state={username:"",password:"",city:"",email:"",photo:""},a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"login-clean"},r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("h2",{className:"sr-only"},"Login Form"),r.a.createElement("div",{className:"illustration"},r.a.createElement("img",{className:"rounded-circle",src:f.a,width:150,alt:"logo"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",name:"username",placeholder:"Username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",name:"city",placeholder:"City",value:this.state.city,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{id:"photo",type:"file",name:"photo",src:this.state.photo,onChange:function(t){return e.handleFileUpload(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",type:"submit",value:"Signup"},"Signup")),r.a.createElement("p",{className:"forgot"},"Already have an account? ",r.a.createElement(h.b,{to:"/login"},"Log in"))))}}]),t}(n.Component)),j=Object(p.g)(O),U=(a(311),function(e){function t(e){var a;return Object(l.a)(this,t),console.log(e),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).editButtonClicked=function(){a.state.editing&&a.updateUser(),a.setState(Object(o.a)({},a.state,{editing:!a.state.editing}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(E.a)({},n,r))},a.updateUser=function(){console.log(a.props._id),a.service.updateUser(a.props._id,a.state.username,a.state.city,a.state.email).then(function(e){console.log("Updated!",e)}).catch(function(e){console.log(e)})},a.state={username:a.props.username,password:a.props.password,city:a.props.city,email:a.props.email,photo:a.props.photo,editing:!1},a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"profile-body"},r.a.createElement("div",{className:"profile-body-left"},r.a.createElement("img",{id:"avatar",src:this.state.photo})),r.a.createElement("div",{className:"profile-body-right"},r.a.createElement("div",{className:"tittle-profile"},r.a.createElement("h1",null,"Hello ",this.props.username," ")),r.a.createElement("div",null,r.a.createElement("div",{className:"my-dates"},r.a.createElement("p",{className:"left-label"},"Name"),this.state.editing?r.a.createElement("input",{className:"form-control",type:"test",name:"username",value:this.state.username,onChange:this.handleChange}):r.a.createElement("p",null,this.state.username," ")),r.a.createElement("div",{className:"my-dates"},r.a.createElement("p",{className:"left-label"},"City "),this.state.editing?r.a.createElement("input",{className:"form-control",type:"text",name:"city",placeholder:"City",value:this.state.city,onChange:this.handleChange}):r.a.createElement("p",null,this.state.city)),r.a.createElement("div",{className:"my-dates"},r.a.createElement("p",{className:"left-label"},"Email"),this.state.editing?r.a.createElement("input",{className:"form-control",type:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange}):r.a.createElement("p",null,this.state.email)),r.a.createElement("div",{className:"button-container"},this.state.editing?r.a.createElement("button",{id:"button",className:"button-profile",onClick:this.editButtonClicked},"Save"):r.a.createElement("button",{id:"button",className:"button-profile",onClick:this.editButtonClicked},"Edit your data"),r.a.createElement("button",{id:"button",className:"button-profile",onClick:function(t){e.props.logout(t)}},"Logout"))))))}}]),t}(n.Component)),w=(a(312),a(313),a(251)),P=a.n(w),k=[{name:"All"},{name:"Fashion"},{name:"Sports"},{name:"Motor"},{name:"Books"},{name:"Tools"},{name:"Home"},{name:"Other"}],S=function(e){var t=e.text,a=e.selected;return r.a.createElement("div",{className:"menu-item ".concat(a?"active":"")},t)},I=function(e,t){return e.map(function(e){var a=e.name;return r.a.createElement(S,{text:a,key:a,selected:t})})},x=function(e){var t=e.text,a=e.className;return r.a.createElement("div",{className:a},t)},D=x({text:"<",className:"arrow-prev"}),M=x({text:">",className:"arrow-next"}),R="All",F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={selected:R},a.onSelect=function(e){a.setState({filterCategory:e}),a.props.filterProducts(e)},console.log(e),a.menuItems=I(k,R),a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.selected,t=this.menuItems;return r.a.createElement("div",{className:"App"},r.a.createElement(P.a,{data:t,arrowLeft:D,arrowRight:M,selected:e,onSelect:this.onSelect}))}}]),t}(n.Component),_=a(75),A=a.n(_),L=(a(126),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getAllProducts=function(){a.service.getProducts().then(function(e){a.setState({products:a.filterProducts(e.data)})}).catch(function(e){console.log(e)})},a.filterCategoryDidUpdate=function(e){a.setState(Object(o.a)({},a.state,{category:e})),a.getAllProducts()},a.filterProducts=function(e){var t=a.props.getFilterQuery().toLowerCase(),n=a.state.category;return console.log("Filtering get all products by query",t,"category",n),e.filter(function(e){return 0===t.length||e.name.toLowerCase().includes(t)}).filter(function(e){return"All"===n||""===n||e.category===n})},a.getImageName=function(e){return e.imageUrl},a.state={products:[],category:"All"},a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getAllProducts()}},{key:"componentWillReceiveProps",value:function(){this.getAllProducts()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container1"},r.a.createElement(F,Object.assign({},this.state.product,{filterProducts:function(t){return e.filterCategoryDidUpdate(t)}})),r.a.createElement("div",{className:"items"},this.state.products.map(function(t){var a=Math.round(t.rating),n=a>0;return r.a.createElement(h.b,{to:"/product/"+t._id,key:t._id},r.a.createElement("div",{className:"card",style:{width:"18rem",marginBottom:"2rem"}},r.a.createElement("img",{src:e.getImageName(t),className:"card-img-top",alt:t.name,style:{height:"18rem"}}),r.a.createElement("div",{className:"card-body"},r.a.createElement(A.a,{visible:n,total:a,rating:a,interactive:!1}),r.a.createElement("h3",null,t.name),r.a.createElement("h3",null,t.price," \u20ac"),r.a.createElement("p",null,t.category),r.a.createElement("p",null,"Owner: ",t.owner.username))))})))}}]),t}(n.Component)),T=a(104),B=a.n(T),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"cli",value:function(e){console.log(e)}},{key:"setMapProperties",value:function(e,t){return new t.Marker({position:{lat:this.props.prod.position.lat,lng:this.props.prod.position.lng},map:e,title:this.props.prod.name})}},{key:"render",value:function(){var e=this,t={center:{lat:this.props.prod.position.lat,lng:this.props.prod.position.lng},zoom:15},a="";return a=""===this.props.prod.imageUrl?null:r.a.createElement(B.a,{onClick:function(t){return e.cli(t)},bootstrapURLKeys:{key:this.props.API_KEY},defaultCenter:t.center,defaultZoom:t.zoom,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.setMapProperties(a,n)}}),r.a.createElement("div",{style:{height:"60vh",width:"95%"}},a)}}]),t}(n.Component),H=(a(337),a(62)),Y=a(155),z=(a(345),a(346),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),console.log("handleSubmit",a.props);var t=a.props.product,n=a.props.product.owner,r=a.props.loggedInUser._id,c=a.state.firstDay,s=a.state.lastDay;a.service.addRent(t,n,r,c,s).then(function(e){a.props.history.push("/user/".concat(a.props.loggedInUser._id,"/myrents")),a.setState({product:t,owner:n,client:r,firstDay:c,lastDay:s})}).catch(function(e){console.log("Error while adding the thing: ",e)})},a.state={firstDay:new Date,lastDay:new Date},a.service=new N,a.handleChangeFirstDate=a.handleChangeFirstDate.bind(Object(H.a)(a)),a.handleChangeLastDate=a.handleChangeLastDate.bind(Object(H.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleChangeFirstDate",value:function(e){this.setState(Object(o.a)({},this.state,{firstDay:e}))}},{key:"handleChangeLastDate",value:function(e){this.setState(Object(o.a)({},this.state,{lastDay:e}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"head-card"},r.a.createElement("form",{className:"form1",onSubmit:this.handleFormSubmit},r.a.createElement("div",null,"From:",r.a.createElement(Y.a,{className:"date date-selector",selected:this.state.firstDay,onChange:this.handleChangeFirstDate,dateFormat:"dd/MM/yyyy"})),r.a.createElement("div",null,"to:",r.a.createElement(Y.a,{className:"date date-selector",selected:this.state.lastDay,onChange:this.handleChangeLastDate,dateFormat:"dd/MM/yyyy"})),r.a.createElement("div",{className:"button-container"},r.a.createElement("button",{className:"button-large",id:"button-chat",onClick:function(t){return e.handleSubmit(t)}},"Request"),r.a.createElement(h.b,{to:"/messages/"+this.props.product._id},r.a.createElement("button",{className:"button-large",id:"button-chat"},"Chat"))))))}}]),t}(n.Component)),q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getSingleProduct=function(){a.service.getProductDetail(a.props.productId).then(function(e){var t=e;a.setState({product:t})}).catch(function(e){console.log(e)})},a.isMyProduct=function(){return a.props.loggedInUser._id===a.state.product.owner._id},console.log(e),a.state={product:{imageUrl:"",owner:{},position:[]},uploadRent:!1},a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getSingleProduct()}},{key:"render",value:function(){return r.a.createElement("div",{className:"carousel-slide","data-ride":"carousel"},!this.isMyProduct()&&r.a.createElement(z,{history:this.props.history,product:this.state.product,loggedInUser:this.props.loggedInUser}),r.a.createElement("div",{className:"box-detail"},r.a.createElement("div",{className:"up-box"},r.a.createElement("div",{className:"detail"},r.a.createElement(h.b,{to:"/user/"+this.state.product.owner._id+"/products"},r.a.createElement("p",null,"See other products of ",this.state.product.owner.username))),r.a.createElement("div",null,r.a.createElement(A.a,{total:this.state.product.rating,rating:this.state.product.rating,interactive:!1}))),r.a.createElement("div",{className:"image-detail"},r.a.createElement("img",{src:this.state.product.imageUrl,alt:""})),r.a.createElement("div",{className:"detail"},r.a.createElement("h5",{className:"card-title"},this.state.product.name),r.a.createElement("h6",{className:"card-text"},"Price per day"),r.a.createElement("p",{className:"card-text"},this.state.product.price," \u20ac"),r.a.createElement("h6",{className:"card-text"},"Description"),r.a.createElement("p",{className:"card-text"},this.state.product.description)),r.a.createElement("div",{className:"map-detail"},r.a.createElement(Q,{API_KEY:"AIzaSyAzGHDso1aXodTgAxYYmuTHdp9iVdxanhM",prod:this.state.product}))))}}]),t}(n.Component),K=(a(347),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).ownerProduct=function(){var e=a.props.match.params;a.service.getMyProducts(e.id).then(function(e){var t=e;a.setState({productsOwner:t})}).catch(function(e){console.log(e)})},console.log(e),a.state={productsOwner:[]},a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.ownerProduct()}},{key:"render",value:function(){return r.a.createElement("div",{className:"container2"},r.a.createElement("div",null,r.a.createElement("div",{className:"items2"},this.state.productsOwner.map(function(e){return r.a.createElement(h.b,{to:"/product/"+e._id},r.a.createElement("div",{key:e._id},r.a.createElement("div",{className:"card2"},r.a.createElement("img",{src:e.imageUrl,style:{height:250},className:"card-img-top",alt:e.name}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h6",null,e.name),r.a.createElement("h6",null,e.price," \u20ac")))))}))))}}]),t}(n.Component)),G=a(280),W=(a(348),a(349),a(350),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).currentMarker=null,e.maps=null,e.map=null,e.state={position:{lat:40.416755454374595,lng:-3.703208023041725}},e}return Object(d.a)(t,e),Object(i.a)(t,[{key:"clic",value:function(e){console.log(e.lat,e.lng),this.props.coordinates(e.lat,e.lng);var t={lat:e.lat,lng:e.lng};null!=this.currentMarker&&this.currentMarker.setMap(null),this.currentMarker=new this.maps.Marker({position:t,map:this.map})}},{key:"setMapProperties",value:function(e,t){this.map=e,this.maps=t}},{key:"render",value:function(){var e=this,t={center:{lat:40.416755454374595,lng:-3.703208023041725},zoom:10};return r.a.createElement(B.a,{onClick:function(t){return e.clic(t)},bootstrapURLKeys:{key:this.props.API_KEY},defaultCenter:t.center,defaultZoom:t.zoom,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.setMapProperties(a,n)}})}}]),t}(n.Component)),J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).coordinates=function(e,t){var n={lat:e,lng:t};a.setState({position:n})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(E.a)({},n,r))},a.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files[0]);var t=new FormData;t.append("imageUrl",e.target.files[0]),a.service.handleUpload(t).then(function(e){a.setState(Object(o.a)({},a.state,{imageUrl:e.secure_url}))}).catch(function(e){console.log("Error while uploading the file: ",e)})},a.handleSubmit=function(e){e.preventDefault();var t=a.props._id,n=a.state.name,r=a.state.category,c=a.state.price,s=a.state.description,o=a.state.imageUrl,l={lat:a.state.position.lat,lng:a.state.position.lng};a.button="add",a.service.addProduct(t,o,n,r,c,s,l).then(function(e){console.log("added: ",e),a.props.uploadProductDidAddProduct(e),document.getElementById(a.image).value="",a.setState({owner:a.props._id,name:"",category:"",price:"",description:"",imageUrl:"",position:{lat:0,lng:0}})}).catch(function(e){console.log("Error while adding the thing: ",e)})},a.state={owner:a.props._id,name:"",category:"",price:"",description:"",imageUrl:"",position:{lat:0,lng:0}},a.image="image",a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"head"},r.a.createElement("h2",null,"New Product")),r.a.createElement("div",{className:"drop3"},r.a.createElement("div",{className:"box"},r.a.createElement("form",{className:"form1",onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:"dates"},r.a.createElement("div",{className:"select"},r.a.createElement("input",{id:"image",type:"file",value:this.state.pictures,onChange:function(t){return e.handleFileUpload(t)}}),r.a.createElement("img",{src:this.state.imageUrl,alt:"",style:{height:20,width:20}})),r.a.createElement("div",{className:"date"},r.a.createElement("input",{type:"text",placeholder:"Product Name",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)},required:!0})),r.a.createElement("div",{className:"date"},r.a.createElement("select",{name:"category",form:"category",value:this.state.category,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:""},"-----"),r.a.createElement("option",{value:"Sports"},"Sports"),r.a.createElement("option",{value:"Motor"},"Motor"),r.a.createElement("option",{value:"Books"},"Books"),r.a.createElement("option",{value:"Tools"},"Tools"),r.a.createElement("option",{value:"Home"},"Home"),r.a.createElement("option",{value:"Other"},"Other"),r.a.createElement("option",{value:"Fashion"},"Fashion"))),r.a.createElement("div",{className:"date"},r.a.createElement("input",{type:"text",placeholder:"Price \u20ac ",name:"price",value:this.state.price,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"date"},r.a.createElement("textarea",{type:"text",placeholder:"How is it?",name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"date"},r.a.createElement("p",null,"Remember, you must select the location of your product on the map")),r.a.createElement("div",null,r.a.createElement("button",{id:"add",className:"button",onClick:function(t){return e.handleSubmit(t)}},"Add"))),r.a.createElement("div",{className:"map"},r.a.createElement(W,{API_KEY:"AIzaSyAzGHDso1aXodTgAxYYmuTHdp9iVdxanhM",coordinates:this.coordinates}))))))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).uploadProductDidAddProduct=function(e){console.log("Product added",e);var t=a.state.myProducts;t.push(e),a.setState(Object(o.a)({},a.state,{myProducts:t}))},a.deleteProductClicked=function(e,t){a.clearEditingIndexes(t),a.service.deleteProduct(e._id).then(function(e){var n=Object(G.a)(a.state.myProducts);n.splice(t,1),a.setState(Object(o.a)({},a.state,{myProducts:n}))}).catch(function(e){console.log(e)})},a.editButtonClicked=function(e,t){var n=a.state.editingIndexes.indexOf(t);n>-1?(a.state.editingIndexes.splice(n,1),a.updateProduct(e)):a.state.editingIndexes.push(t),a.setState(Object(o.a)({},a.state,{editingIndexes:a.state.editingIndexes}))},a.clearEditingIndexes=function(e){var t=a.state.editingIndexes.indexOf(e);t>-1&&a.state.editingIndexes.splice(t,1)},a.handleChange=function(e,t){var n=e.target,r=n.name,c=n.value;a.state.myProducts[t][r]=c,a.setState(Object(o.a)({},a.state,{myProducts:a.state.myProducts}))},a.updateProduct=function(e){a.service.updateProduct(e._id,e.imageUrl,e.name,e.category,e.price,e.description,e.position).then(function(e){console.log("Updated!",e)}).catch(function(e){console.log(e)})},a.state={myProducts:[],editingIndexes:[]},a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props._id;this.service.getMyProducts(t).then(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{myProducts:t}))}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container3"},r.a.createElement("div",{className:"tittle"},r.a.createElement("h3",null,"Your Products ",this.props.username)),this.state.myProducts.map(function(t,a){return r.a.createElement("div",{className:"drop3 cont",key:a},r.a.createElement("div",null,r.a.createElement("img",{className:"image",src:t.imageUrl,alt:t.name})),r.a.createElement("div",{className:"colum"},r.a.createElement("div",{className:"contenido"},r.a.createElement("div",{className:"product"},e.state.editingIndexes.includes(a)?r.a.createElement("input",{className:"card-title",type:"test",name:"name",value:t.name,onChange:function(t){return e.handleChange(t,a)}}):r.a.createElement("h5",{className:"card-title"},t.name)),r.a.createElement("div",{className:"product"},e.state.editingIndexes.includes(a)?r.a.createElement("select",{name:"category",form:"category",value:t.category,onChange:function(t){return e.handleChange(t,a)}},r.a.createElement("option",{value:"Sports"},"Sports"),r.a.createElement("option",{value:"Motor"},"Motor"),r.a.createElement("option",{value:"Books"},"Books"),r.a.createElement("option",{value:"Tools"},"Tools"),r.a.createElement("option",{value:"Home"},"Home"),r.a.createElement("option",{value:"Other"},"Other"),r.a.createElement("option",{value:"Fashion"},"Fashion")):r.a.createElement("p",{className:"card-text"},t.category)),r.a.createElement("div",{className:"product"},e.state.editingIndexes.includes(a)?r.a.createElement("input",{className:"card-text",type:"text",placeholder:"Price \u20ac ",name:"price",value:t.price,onChange:function(t){return e.handleChange(t,a)}}):r.a.createElement("p",{className:"card-text"},t.price," \u20ac"))),r.a.createElement("div",{className:"card-body"},e.state.editingIndexes.includes(a)?r.a.createElement("div",null,r.a.createElement("textarea",{className:"card-text",type:"text",placeholder:"How is it?",name:"description",value:t.description,onChange:function(t){return e.handleChange(t,a)}})," "):r.a.createElement("div",null,r.a.createElement("p",{className:"card-text"},t.description," ")))),r.a.createElement("div",{className:"btn-edit"},e.state.editingIndexes.includes(a)?r.a.createElement("button",{id:"button",className:"btn btn-warning",onClick:function(n){return e.editButtonClicked(t,a)},producs:e.myproducts},"Save"):r.a.createElement("button",{id:"button",className:"",onClick:function(n){return e.editButtonClicked(t,a)},producs:e.myproducts},"Edit"),r.a.createElement("button",{id:"button",className:"btn btn-warning",onClick:function(){return e.deleteProductClicked(t,a)}},"Delete")))}),r.a.createElement("div",null,r.a.createElement(J,Object.assign({},this.props,{uploadProductDidAddProduct:function(t){return e.uploadProductDidAddProduct(t)}}))))}}]),t}(n.Component),X=a(29),Z=a(113),$=(a(641),function(e){function t(e){var a;return Object(l.a)(this,t),console.log(e),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){a.loadChat(),a.getSingleProduct()},a.getSingleProduct=function(){null!==a.props.productId&&a.service.getProductDetail(a.props.productId).then(function(e){console.log("getProductDetail ok",e);var t=e;a.loadChannel(t)}).catch(function(e){console.log("getProductDetail no ok",e)})},a.loadChat=function(){a.state.chatClient=new Z.a("476rbkbracqc"),a.state.chatClient.setUser({id:a.props.loggedInUser.username,name:a.props.loggedInUser.username,image:a.props.loggedInUser.photo},a.props.loggedInUser.chatToken),a.setState(Object(o.a)({},a.state,{chatClient:a.state.chatClient}))},a.loadChannel=function(e){console.log("Loading chat for",e,"members",[a.props.loggedInUser.username,e.owner.username]);var t=a.state.chatClient.channel("messaging",a.getChannelId(e),{image:e.imageUrl,name:e.name,members:[a.props.loggedInUser.username,e.owner.username]});a.setState(Object(o.a)({},a.state,{channel:t,product:e}))},a.getChannelId=function(e){var t=a.props.loggedInUser.id,n=e.owner._id,r=e._id;return console.log(n),t+"-"+n+"-"+r},a.state={channel:null,chatClient:null,product:null},a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){if(null===this.state.chatClient)return r.a.createElement("div",null);var e={members:{$in:[this.props.loggedInUser.username]}};return r.a.createElement("div",null,r.a.createElement(X.f,{client:this.state.chatClient,theme:"messaging light"},null===this.state.channel?r.a.createElement(X.c,{filters:e,sort:{last_message_at:-1,limit:3},List:X.d,Preview:X.e}):r.a.createElement("div",null),null===this.state.channel?r.a.createElement(X.a,null," ",r.a.createElement(X.j,null," ",r.a.createElement(X.b,null)," ",r.a.createElement(X.h,null)," ",r.a.createElement(X.g,null)," ")," ",r.a.createElement(X.i,null)," "):r.a.createElement(X.a,{channel:this.state.channel}," ",r.a.createElement(X.j,null," ",r.a.createElement(X.b,null)," ",r.a.createElement(X.h,null)," ",r.a.createElement(X.g,null)," ")," ",r.a.createElement(X.i,null)," ")))}}]),t}(n.Component)),ee=(a(642),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e,t){a.service.updateRating(a.state.myRents[t]._id,e.rating).then(function(){a.state.myRents[t].rating=e.rating,a.setState(Object(o.a)({},a.state,{myRents:a.state.myRents}))}).catch(console.log)},a.handleStatus=function(e,t){var n=e.target.value;a.service.updateStatus(a.state.myRentsPending[t]._id,n).then(function(){a.state.myRentsPending[t].status=n,a.setState(Object(o.a)({},a.state,{myRentsPending:a.state.myRentsPending}))}).catch(console.log)},a.formatDate=function(e){var t=e.toString().split("T");return t.length>1?t[0]:"Unknown"},a.canInteract=function(e){return"confirmed"===e.status&&0===e.rating},a.state={myRents:[],myRentsPending:[]},a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props._id;Promise.all([this.service.getMyRents(t),this.service.getMyRentsPending(t)]).then(function(t){console.log(t),e.setState(Object(o.a)({},e.state,{myRents:t[0],myRentsPending:t[1]}))}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container3"},r.a.createElement("div",{className:"tittle"},r.a.createElement("h3",null,"My Rents")),this.state.myRents.map(function(t,a){return r.a.createElement("div",{className:"drop3 cont",key:a},r.a.createElement("div",null,r.a.createElement("img",{className:"image",src:t.product.imageUrl,alt:t.product.name})),r.a.createElement("div",{className:"flex-fill"},r.a.createElement("div",{className:"colum"},r.a.createElement("div",{className:"contenido"},r.a.createElement("div",{className:"product"},r.a.createElement("h5",{className:"card-title"},t.product.name)),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},t.product.price," \u20ac")),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},t.category)),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},e.formatDate(t.firstDay))),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},e.formatDate(t.lastDay))),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},"Status: ",t.status)))),r.a.createElement("div",null,"Rate to ",t.owner.username," :",r.a.createElement(A.a,{total:5,rating:t.rating,interactive:e.canInteract(t),onRate:function(t){e.handleChange(t,a)}}))))}),r.a.createElement("div",{className:"tittle"},r.a.createElement("h3",null,"My Requests")),this.state.myRentsPending.map(function(t,a){return r.a.createElement("div",{className:"drop3 cont",key:a},r.a.createElement("div",null,r.a.createElement("img",{className:"image",src:t.product.imageUrl,alt:t.product.name})),r.a.createElement("div",{className:"colum"},r.a.createElement("div",{className:"contenido"},r.a.createElement("div",{className:"product"},r.a.createElement("h5",{className:"card-title"},t.product.name)),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},t.product.price," \u20ac")),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},t.category)),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},e.formatDate(t.firstDay))),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},e.formatDate(t.lastDay))),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},"Status: ",t.status)),r.a.createElement("div",{className:"product"},r.a.createElement("p",{className:"card-text"},"Client: ",t.client.username)))),r.a.createElement("div",{className:"btn-edit"},r.a.createElement("button",{id:"button",className:"btn btn-warning",disabled:"pending"!==t.status,value:"confirmed",onClick:function(t){return e.handleStatus(t,a)}},"Confirm"),r.a.createElement("button",{id:"button",className:"btn btn-warning",disabled:"pending"!==t.status,value:"rejected",onClick:function(t){return e.handleStatus(t,a)}},"Reject")))}))}}]),t}(n.Component)),te=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getTheUser=function(e){a.setState(Object(o.a)({},a.state,{loggedInUser:e}))},a.logout=function(e){e.preventDefault(),a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.loadChat=function(){console.log("Load chat to",a.state.loggedInUser.username),new Z.a("476rbkbracqc").setUser({id:a.state.loggedInUser.username,name:a.state.loggedInUser.username,image:a.state.loggedInUser.photo},a.state.loggedInUser.chatToken)},a.fetchUser=function(){a.service.loggedin().then(function(e){a.setState({loggedInUser:e}),a.state.loggedInUser=e,a.loadChat()})},a.state={filterQuery:"",loggedInUser:null},a.service=new N,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"filterProducts",value:function(e){this.setState(Object(o.a)({},this.state,{filterQuery:e}))}},{key:"render",value:function(){var e=this;return console.log(this.state.loggedInUser),this.state.loggedInUser?r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{filterProducts:function(t){return e.filterProducts(t)},loggedInUser:this.state.loggedInUser,filterQuery:this.state.filterQuery,getTheUser:this.getTheUser,logout:this.logout}),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(p.a,{to:"/products"})}}),r.a.createElement(p.b,{exact:!0,path:"/singup",render:function(){return r.a.createElement(p.a,{to:"/products"})}}),r.a.createElement(p.b,{exact:!0,path:"/profile",render:function(){return r.a.createElement(U,Object.assign({},e.state.loggedInUser,{logout:e.logout}))}}),r.a.createElement(p.b,{exact:!0,path:"/products",render:function(){return r.a.createElement(L,{getFilterQuery:function(){return e.state.filterQuery}})}}),r.a.createElement(p.b,{exact:!0,path:"/product/:id",render:function(t){return r.a.createElement(q,{history:t.history,productId:t.match.params.id,loggedInUser:e.state.loggedInUser})}}),r.a.createElement(p.b,{exact:!0,path:"/user/:id/products",component:K}),"}} />",r.a.createElement(p.b,{exact:!0,path:"/myproducts",render:function(){return r.a.createElement(V,Object.assign({},e.state.loggedInUser,{getUser:e.getTheUser}))}}),r.a.createElement(p.b,{exact:!0,path:"/messages/:id",render:function(t){return r.a.createElement($,{loggedInUser:e.state.loggedInUser,productId:t.match.params.id})}}),r.a.createElement(p.b,{exact:!0,path:"/messages",render:function(t){return r.a.createElement($,{loggedInUser:e.state.loggedInUser})}}),r.a.createElement(p.b,{exact:!0,path:"/user/:id/myrents",render:function(){return r.a.createElement(ee,Object.assign({},e.state.loggedInUser,{getUser:e.getTheUser}))}}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(C,Object.assign({},e.state.loggedInUser,{getUser:e.getTheUser}))}}),r.a.createElement(p.b,{exact:!0,path:"/signup",render:function(){return r.a.createElement(j,Object.assign({},e.state.loggedInUser,{getUser:e.getTheUser}))}}),r.a.createElement(p.b,{render:function(){return r.a.createElement(p.a,{to:"/login"})}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(643);s.a.render(r.a.createElement(h.a,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},74:function(e,t,a){e.exports=a.p+"static/media/logo-white.1aba4fc4.png"}},[[281,1,2]]]);
//# sourceMappingURL=main.a1c0b6de.chunk.js.map